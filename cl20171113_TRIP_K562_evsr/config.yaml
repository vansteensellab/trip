# Configuration file for mapping of Thetered-TRIP experiments performed in K562 cells.
# This configuration contains all configurations used by the pipeline.
# Different parts of the pipeline use this configuration:
#
# snakemake:
#   this part mainly contains input files and a description of each file
#   the following input files are used:
#     - cDNA:
#         fastq files with cDNA reads of barcoded reporters
#     - gDNA:
#         fastq files with gDNA reads of barcoded reporters used to normalize the cDNA (cDNA) reads
#     - spike-in:
#         fastq file with only reads of the spike-in library which was mixed in with the cDNA and gDNA reads.
#     - forward_mapping:
#         fastq files with forward iPCR reads of reporter integrations containing barcodes.
#     - reverse_mapping:
#         fastq files with reverse iPCR reads of reporter integrations with intergration site.

###############################
### snakemake configuration ###
###############################
outdir: 'cl20171120_TRIP_K562_evsr'



###############################################################################
###++++++++++++++++++++++++++++ parser settings ++++++++++++++++++++++++++++###
###############################################################################
# Typical structure of gDNA and cDNA reads:
#      index            pat1               barcode           pat2
# NNNNNNNNNNGTCACAAGGGCCGGCCACAACTCGAGNNNNNNNNNNNNNNNNTGATCCTGCAGTGTCACC...
#
# settings:
#   barcode_length -- the length of the barcode
#   pat1 -- the first constant pattern (after index, before barcode)
#   pat2 -- the pattern after the barcode
# #****************************************************************************
# Typical structures of mapping reads
#
# Forward Read:
#
# format_map1
#      index   	        pat1             barcode     pat2		genomic DNA
# NNNNNNNNNNGTCACAAGGGCCGGCCACAACTCGAGNNNNNNNNNNNNNNNNTGATCNNNNNNNNNNNNNNNNNNNN
#
# Reverse Read:
# 	     map_pat_rev					     genomic DNA
# GTACGTCACAATATGATTATCTTTCTAGGGTTAANNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN

indir:
    /DATA/usr/c.leemans/data/forge/userdata/yx4x9aCqK2TJCuwR8UgDsLwcMORpOIiZ62uONIgQ

input_file:
    mapping:
        [M403/4687_1_BarcodedPool_NoIndex_S1_R1_001.fastq.gz,
         M403/4687_1_BarcodedPool_NoIndex_S1_R2_001.fastq.gz]
    gDNA: [run766/4688_1_BarcodedPool_NoIndex_S2_R1_001.fastq.gz]
    cDNA: [run766/4688_1_BarcodedPool_NoIndex_S2_R1_001.fastq.gz]



index:
    mapping:
        6A: TAGTATCAGC
        6B: TCTCTATGCG
        8A: TGATACGTCT
        8B: TACTGAGCTA
        11A: CATAGTAGTG
        11B: CGAGAGATAC
        hPGK_A: ATACGACGTA
        hPGK_B: TCACGTACTA
    gDNA:
        6A_r1: TCGTCGCTCG
        6B_r1: ACATACGCGT
        8A_r1: ACGCGAGTAT
        8B_r1: ACTACTATGT
        11A_r1: ACTGTACAGT
        11B_r1: AGACTATACT
        hPGK_A_r1: AGCGTCGTCT
        hPGK_B_r1: AGTACGCTAT
        6A_r2: TAGTGTAGAT
        6B_r2: TCGATCACGT
        8A_r2: TCGCACTAGT
        8B_r2: TCTAGCGACT
        11A_r2: TCTATACTAT
        11B_r2: TGACGTATGT
        hPGK_A_r2: TGTGAGTAGT
        hPGK_B_r2: ACAGTATATA
    cDNA:
        6A_r1: ATAGAGTACT
        6B_r1: CACGCTACGT
        8A_r1: CAGTAGACGT
        8B_r1: CGACGTGACT
        11A_r1: TACACACACT
        11B_r1: TACACGTGAT
        hPGK_A_r1: TACAGATCGT
        hPGK_B_r1: TACGCTGTCT
        6A_r2: ACGAGTGCGT
        6B_r2: ACGCTCGACA
        8A_r2: AGACGCACTC
        8B_r2: AGCACTGTAG
        11A_r2: ATCAGACACG
        11B_r2: ATATCGCGAG
        hPGK_A_r2: CGTGTCTCTA
        hPGK_B_r2: CTCGCGTGTC


structure:
  index: |
    ID      5'      3'      type    req     second-read     pos   keep-bases
    index   %s      -       index   present False   fixed   -
  mapping: |
    ID      5'      3'      type    req     second-read     pos   keep-bases
    map_pat1a       GTCACAAGGGCCGGCCACAAC   -       const   present False   fixed   -
    const_bar       TCGAG\{16\}TGATC  -       const_bar       present False   fixed   -
    rev_map_complement      -       TTAACCCTAGAAAGATAATCATATTGTGACGTAC      const   -       False   var   -
    rev_map GTANGTCANAATATGATTATCTTTCTAGGGTTAA      -       const   present True    fixed   -
    fwd_map_complement      -       GATCA[BC]CTCGAGTTGTGGCCGGCCCTTGTGAC     const_bar_comp  -       True    var   -

  gDNA: |
    ID      5'      3'      type    req     second-read     pos                   keep-bases
    pat1    GTCACAAGGGCCGGCCACAACTCGAG      -       const   present False   fixed   -
    barcode 16      -       barcode present False   fixed   -
    pat2    TGATCCTGCAGTG   -       const   present False   var   -

  cDNA: |
    ID      5'      3'      type    req     second-read     pos     keep-bases
    pat1    GTCACAAGGGCCGGCCACAACTCGAG      -       const   present False   fixed   -
    barcode 16      -       barcode present False   fixed   -
    pat2    TGATCCTGCAGTG   -       const   present False   var   -

  spike: |
    ID      5'      3'      type    req     second-read     pos     keep-bases
    pat1    GTCACAAGGGCCGGCCACAA    -       const   present False   fixed   -
    barcode 16      -       barcode present False   fixed   -
    pat2    GATCGGTACCCA    -       const   present False   var   -

lev_dist: 2

min_count:
  spike: 1000
  gDNA: 5
  cDNA: 0
  map: 3

bowtie:
  index: /DATA/data/bowtie2/hg19_ch1-22_XYM
  options:
      '1': ['--very-sensitive']
      '2': ['--very-sensitive-local']


max_dist:
    '1': 500
    '2': 20

parser: ~t.v.schaik/mydata/modules/read-parsing/read_parser.py
